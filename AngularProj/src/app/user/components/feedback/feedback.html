<div class="feedback-container">
  <h2 class="title">My Feedbacks</h2>

  <!-- No feedback message -->
  <div *ngIf="!feedbacks.length" class="empty">
    <p>No feedbacks yet. Be the first to share your thoughts!</p>
  </div>

  <!-- Feedback cards -->
  <div class="feedback-list" *ngIf="feedbacks.length">
    <mat-card *ngFor="let fb of feedbacks" class="feedback-card">
      <mat-card-header>
        <mat-card-title>{{ getEventName(fb.eventId) }}</mat-card-title>
        <mat-card-subtitle>{{ fb.createdAt | date:'mediumDate' }}</mat-card-subtitle>
      </mat-card-header>
      <mat-card-content>
        <p class="comment">{{ fb.comment }}</p>
        <div class="rating">
          <span *ngFor="let r of stars" [class.filled]="r <= fb.rating">★</span>
        </div>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Add new feedback -->
  <div class="add-feedback" *ngIf="userEvents.length">
    <h3>Add New Feedback</h3>

    <label>Event:</label>
    <select [(ngModel)]="selectedEventId">
      <option *ngFor="let ev of userEvents" [value]="ev.id">{{ ev.name }}</option>
    </select>

    <label>Rating:</label>
    <div class="stars-input">
      <span *ngFor="let r of stars" 
            (click)="selectRating(r)" 
            [class.selected]="r <= newRating">★</span>
    </div>

    <label>Comment:</label>
    <textarea [(ngModel)]="newComment" rows="4" placeholder="Share your experience..."></textarea>

    <button mat-raised-button color="primary" (click)="addFeedback()">Submit Feedback</button>
  </div>

  <!-- No finished events -->
  <div *ngIf="!userEvents.length" class="empty">
    <p>No finished events available for feedback yet.</p>
  </div>
</div>

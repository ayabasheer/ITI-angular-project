<div class="profile-container" [class.dark-mode]="isDarkMode">
  <!-- Top Header Bar -->
  <nav class="navbar navbar-expand-lg" [class.navbar-dark]="isDarkMode" [class.bg-primary]="!isDarkMode" [class.bg-dark]="isDarkMode">
    <div class="container-fluid">
      <div class="d-flex align-items-center">
        <h1 class="navbar-brand mb-0 fw-bold">Event Planning System</h1>
      </div>
      <div class="d-flex align-items-center">
        <button class="btn me-3" 
                [class.btn-outline-light]="!isDarkMode" 
                [class.btn-outline-secondary]="isDarkMode"
                (click)="toggleDarkMode()"
                title="{{ isDarkMode ? 'Switch to Light Mode' : 'Switch to Dark Mode' }}">
          <i [class]="isDarkMode ? 'bi bi-sun-fill' : 'bi bi-moon-fill'"></i>
        </button>
        <div class="dropdown">
          <button class="btn dropdown-toggle d-flex align-items-center" 
                  [class.btn-outline-light]="!isDarkMode" 
                  [class.btn-outline-secondary]="isDarkMode"
                  type="button" 
                  id="userDropdown" 
                  data-bs-toggle="dropdown" 
                  aria-expanded="false"
                  (click)="onUserProfileClick()">
            <i class="bi bi-person-circle me-2"></i>
            John Doe
          </button>
          <ul class="dropdown-menu dropdown-menu-end" aria-labelledby="userDropdown">
            <li><a class="dropdown-item" href="#" (click)="onViewProfile()"><i class="bi bi-person me-2"></i>Profile</a></li>
            <li><a class="dropdown-item" href="#" (click)="onSettings()"><i class="bi bi-gear me-2"></i>Settings</a></li>
            <li><hr class="dropdown-divider"></li>
            <li><a class="dropdown-item" href="#" (click)="onLogout()"><i class="bi bi-box-arrow-right me-2"></i>Logout</a></li>
          </ul>
        </div>
      </div>
    </div>
  </nav>

  <div class="row g-0">
    <!-- Left Navigation Sidebar -->
    <div class="col-md-3 col-lg-2">
      <div class="sidebar h-100 p-3" [class.sidebar-dark]="isDarkMode">
        <nav class="nav flex-column">
          <a class="nav-link d-flex align-items-center mb-3" 
             [class.active]="activeTab === 'Dashboard'"
             href="#" 
             (click)="onNavItemClick('Dashboard', $event)">
            <i class="bi bi-house-door-fill me-3"></i>
            <span class="nav-text">Dashboard</span>
          </a>
          <a class="nav-link d-flex align-items-center mb-3" 
             [class.active]="activeTab === 'Events'"
             href="#" 
             (click)="onNavItemClick('Events', $event)">
            <i class="bi bi-calendar-event-fill me-3"></i>
            <span class="nav-text">Events</span>
          </a>
          <a class="nav-link d-flex align-items-center mb-3" 
             [class.active]="activeTab === 'Feedback'"
             href="#" 
             (click)="onNavItemClick('Feedback', $event)">
            <i class="bi bi-star-fill me-3"></i>
            <span class="nav-text">Feedback</span>
          </a>
          <a class="nav-link d-flex align-items-center mb-3" 
             [class.active]="activeTab === 'Profile'"
             href="#" 
             (click)="onNavItemClick('Profile', $event)">
            <i class="bi bi-person-fill me-3"></i>
            <span class="nav-text">Profile</span>
          </a>
        </nav>
      </div>
    </div>

    <!-- Main Content Area -->
    <div class="col-md-9 col-lg-10">
      <div class="main-content p-4" [class.main-content-dark]="isDarkMode">
        
        <!-- Profile Content -->
        <div *ngIf="activeTab === 'Profile'">
          <div class="d-flex justify-content-between align-items-center mb-4">
            <div>
              <h2 class="h3 mb-1">Profile</h2>
              <p class="text-muted mb-0">Manage your account settings and preferences</p>
            </div>
            <button class="btn btn-primary" (click)="editProfile()">
              <i class="bi bi-pencil-fill me-2"></i>{{ isEditing ? 'Save Changes' : 'Edit Profile' }}
            </button>
          </div>

          <div class="row g-4">
            <!-- Profile Header Card -->
            <div class="col-12">
              <div class="card border-0 shadow-sm profile-header-card">
                <div class="card-body text-center py-5">
                  <div class="profile-avatar mb-3">
                    <img src="https://via.placeholder.com/120x120/007bff/ffffff?text=JD" 
                         alt="Profile Picture" 
                         class="rounded-circle profile-image">
                    <button class="btn btn-sm btn-outline-primary avatar-edit-btn" (click)="changeAvatar()">
                      <i class="bi bi-camera-fill"></i>
                    </button>
                  </div>
                  <h3 class="profile-name mb-1">{{ userProfile.name }}</h3>
                  <p class="text-muted mb-2">{{ userProfile.role }}</p>
                  <div class="profile-badges">
                    <span class="badge bg-primary me-2">
                      <i class="bi bi-star-fill me-1"></i>VIP Guest
                    </span>
                    <span class="badge bg-success me-2">
                      <i class="bi bi-check-circle-fill me-1"></i>Verified
                    </span>
                    <span class="badge bg-info">
                      <i class="bi bi-calendar-check-fill me-1"></i>Active
                    </span>
                  </div>
                </div>
              </div>
            </div>

            <!-- Personal Information -->
            <div class="col-lg-8">
              <div class="card border-0 shadow-sm">
                <div class="card-header bg-white border-0">
                  <h5 class="card-title mb-0">
                    <i class="bi bi-person-fill me-2"></i>Personal Information
                  </h5>
                </div>
                <div class="card-body">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label class="form-label">
                        <i class="bi bi-person me-1"></i>Full Name
                      </label>
                      <input type="text" class="form-control" [value]="userProfile.name" [readonly]="!isEditing">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">
                        <i class="bi bi-envelope me-1"></i>Email Address
                      </label>
                      <input type="email" class="form-control" [value]="userProfile.email" [readonly]="!isEditing">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">
                        <i class="bi bi-telephone me-1"></i>Phone Number
                      </label>
                      <input type="tel" class="form-control" [value]="userProfile.phone" [readonly]="!isEditing">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">
                        <i class="bi bi-geo-alt me-1"></i>Location
                      </label>
                      <input type="text" class="form-control" [value]="userProfile.location" [readonly]="!isEditing">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">
                        <i class="bi bi-calendar me-1"></i>Date of Birth
                      </label>
                      <input type="date" class="form-control" [value]="userProfile.dateOfBirth" [readonly]="!isEditing">
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">
                        <i class="bi bi-briefcase me-1"></i>Occupation
                      </label>
                      <input type="text" class="form-control" [value]="userProfile.occupation" [readonly]="!isEditing">
                    </div>
                    <div class="col-12">
                      <label class="form-label">
                        <i class="bi bi-info-circle me-1"></i>Bio
                      </label>
                      <textarea class="form-control" rows="3" [readonly]="!isEditing">{{ userProfile.bio }}</textarea>
                    </div>
                  </div>
                </div>
              </div>

              <!-- Preferences -->
              <div class="card border-0 shadow-sm mt-4">
                <div class="card-header bg-white border-0">
                  <h5 class="card-title mb-0">
                    <i class="bi bi-gear-fill me-2"></i>Preferences
                  </h5>
                </div>
                <div class="card-body">
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label class="form-label">Event Categories</label>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="tech" checked>
                        <label class="form-check-label" for="tech">Technology</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="business" checked>
                        <label class="form-check-label" for="business">Business</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="networking">
                        <label class="form-check-label" for="networking">Networking</label>
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label class="form-label">Notification Preferences</label>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="email" checked>
                        <label class="form-check-label" for="email">Email Notifications</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="sms">
                        <label class="form-check-label" for="sms">SMS Notifications</label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="checkbox" id="push" checked>
                        <label class="form-check-label" for="push">Push Notifications</label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>

            <!-- Statistics & Activity -->
            <div class="col-lg-4">
              <div class="card border-0 shadow-sm">
                <div class="card-header bg-white border-0">
                  <h5 class="card-title mb-0">
                    <i class="bi bi-graph-up me-2"></i>Statistics
                  </h5>
                </div>
                <div class="card-body">
                  <div class="stat-item d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                      <i class="bi bi-calendar-event text-primary me-2"></i>
                      <span>Total Events</span>
                    </div>
                    <strong class="text-primary">{{ totalEvents }}</strong>
                  </div>
                  <div class="stat-item d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                      <i class="bi bi-star text-warning me-2"></i>
                      <span>Feedback Given</span>
                    </div>
                    <strong class="text-warning">{{ feedbackList.length }}</strong>
                  </div>
                  <div class="stat-item d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                      <i class="bi bi-star-fill text-success me-2"></i>
                      <span>Average Rating</span>
                    </div>
                    <strong class="text-success">{{ getAverageRating() }}</strong>
                  </div>
                  <div class="stat-item d-flex justify-content-between align-items-center mb-3">
                    <div class="d-flex align-items-center">
                      <i class="bi bi-check-circle text-info me-2"></i>
                      <span>Events Attended</span>
                    </div>
                    <strong class="text-info">{{ completedEvents.length }}</strong>
                  </div>
                </div>
              </div>

              <!-- Recent Activity -->
              <div class="card border-0 shadow-sm mt-4">
                <div class="card-header bg-white border-0">
                  <h5 class="card-title mb-0">
                    <i class="bi bi-clock-history me-2"></i>Recent Activity
                  </h5>
                </div>
                <div class="card-body">
                  <div class="activity-item d-flex align-items-start mb-3">
                    <div class="activity-icon bg-primary text-white rounded-circle me-3">
                      <i class="bi bi-star-fill"></i>
                    </div>
                    <div class="activity-content">
                      <p class="mb-1">Rated Summer Wedding Reception</p>
                      <small class="text-muted">2 days ago</small>
                    </div>
                  </div>
                  <div class="activity-item d-flex align-items-start mb-3">
                    <div class="activity-icon bg-success text-white rounded-circle me-3">
                      <i class="bi bi-check-circle-fill"></i>
                    </div>
                    <div class="activity-content">
                      <p class="mb-1">Accepted Charity Fundraiser Gala</p>
                      <small class="text-muted">1 week ago</small>
                    </div>
                  </div>
                  <div class="activity-item d-flex align-items-start">
                    <div class="activity-icon bg-info text-white rounded-circle me-3">
                      <i class="bi bi-calendar-check-fill"></i>
                    </div>
                    <div class="activity-content">
                      <p class="mb-1">Attended Corporate Annual Meeting</p>
                      <small class="text-muted">2 weeks ago</small>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>

      </div>
    </div>
  </div>
</div>
<div class="site-container">
  <div class="card card-creative p-3">
    <h3>Submit Feedback</h3>
    <p class="text-muted">Only guests associated with completed events can submit feedback.</p>

    <form (submit)="submit($event)" *ngIf="isGuest">
      <div *ngIf="!canLeaveFeedback" class="alert alert-warning mb-3">
        You can only leave feedback for completed events you are invited to.
      </div>
      <div class="mb-3" *ngIf="canLeaveFeedback">
        <label class="form-label">Guest ID</label>
        <input class="form-control" [value]="guestId" name="guestId" readonly />
      </div>
      <div class="mb-3" *ngIf="canLeaveFeedback">
        <label class="form-label">Rating (1-5)</label>
        <input class="form-control" type="number" [(ngModel)]="rating" name="rating" min="1" max="5" required />
      </div>
      <div class="mb-3" *ngIf="canLeaveFeedback">
        <label class="form-label">Comment</label>
        <textarea class="form-control" [(ngModel)]="comment" name="comment"></textarea>
      </div>
      <div *ngIf="message" class="alert" [class.alert-success]="ok" [class.alert-danger]="!ok">{{message}}</div>
      <button class="btn btn-primary" [disabled]="!canLeaveFeedback">Submit Feedback</button>
    </form>
    <div *ngIf="!isGuest" class="alert alert-danger mt-3">
      Only authenticated guests can leave feedback.
    </div>
  </div>
</div>
